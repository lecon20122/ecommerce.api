import{e as Re,d as Se,c as Y,_ as p}from"./AntdIcon.ce1c01d7.js";import{r as f,a as d,g as xe,R as oe,j as Z}from"./app.8ea62769.js";import{c as ve,b as me,g as re,_ as _e,a as $e,w as ie,h as he}from"./type.405a74e3.js";import{a as ge,P as Ee,p as Ie,c as Te,K as ae}from"./getScrollBarSize.bd8af318.js";import{c as W}from"./index.b3d31cad.js";function L(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e)return{};var n=i.element,r=n===void 0?document.body:n,t={},o=Object.keys(e);return o.forEach(function(a){t[a]=r.style[a]}),o.forEach(function(a){r.style[a]=e[a]}),t}function Oe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var G={};const se=function(e){if(!(!Oe()&&!e)){var i="ant-scrolling-effect",n=new RegExp("".concat(i),"g"),r=document.body.className;if(e){if(!n.test(r))return;L(G),G={},document.body.className=r.replace(n,"").trim();return}var t=ge();if(t&&(G=L({position:"relative",width:"calc(100% - ".concat(t,"px)")}),!n.test(r))){var o="".concat(r," ").concat(i);document.body.className=o.trim()}}};var g=[],Ce="ant-scrolling-effect",J=new RegExp("".concat(Ce),"g"),Pe=0,Q=new Map,Le=ve(function e(i){var n=this;me(this,e),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var r;return(r=n.options)===null||r===void 0?void 0:r.container},this.reLock=function(r){var t=g.find(function(o){var a=o.target;return a===n.lockTarget});t&&n.unLock(),n.options=r,t&&(t.options=r,n.lock())},this.lock=function(){var r;if(!g.some(function(s){var c=s.target;return c===n.lockTarget})){if(g.some(function(s){var c,u=s.options;return(u==null?void 0:u.container)===((c=n.options)===null||c===void 0?void 0:c.container)})){g=[].concat(re(g),[{target:n.lockTarget,options:n.options}]);return}var t=0,o=((r=n.options)===null||r===void 0?void 0:r.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&(t=ge());var a=o.className;if(g.filter(function(s){var c,u=s.options;return(u==null?void 0:u.container)===((c=n.options)===null||c===void 0?void 0:c.container)}).length===0&&Q.set(o,L({width:t!==0?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!J.test(a)){var l="".concat(a," ").concat(Ce);o.className=l.trim()}g=[].concat(re(g),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var r,t=g.find(function(l){var s=l.target;return s===n.lockTarget});if(g=g.filter(function(l){var s=l.target;return s!==n.lockTarget}),!(!t||g.some(function(l){var s,c=l.options;return(c==null?void 0:c.container)===((s=t.options)===null||s===void 0?void 0:s.container)}))){var o=((r=n.options)===null||r===void 0?void 0:r.container)||document.body,a=o.className;!J.test(a)||(L(Q.get(o),{element:o}),Q.delete(o),o.className=o.className.replace(J,"").trim())}},this.lockTarget=Pe++,this.options=i}),b=0,A=Re(),X={},P=function(i){if(!A)return null;if(i){if(typeof i=="string")return document.querySelectorAll(i)[0];if(typeof i=="function")return i();if(Se(i)==="object"&&i instanceof window.HTMLElement)return i}return document.body},De=function(e){_e(n,e);var i=$e(n);function n(r){var t;return me(this,n),t=i.call(this,r),t.container=void 0,t.componentRef=f.exports.createRef(),t.rafId=void 0,t.scrollLocker=void 0,t.renderComponent=void 0,t.updateScrollLocker=function(o){var a=o||{},l=a.visible,s=t.props,c=s.getContainer,u=s.visible;u&&u!==l&&A&&P(c)!==t.scrollLocker.getContainer()&&t.scrollLocker.reLock({container:P(c)})},t.updateOpenCount=function(o){var a=o||{},l=a.visible,s=a.getContainer,c=t.props,u=c.visible,v=c.getContainer;u!==l&&A&&P(v)===document.body&&(u&&!l?b+=1:o&&(b-=1));var m=typeof v=="function"&&typeof s=="function";(m?v.toString()!==s.toString():v!==s)&&t.removeCurrentContainer()},t.attachToParent=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(o||t.container&&!t.container.parentNode){var a=P(t.props.getContainer);return a?(a.appendChild(t.container),!0):!1}return!0},t.getContainer=function(){return A?(t.container||(t.container=document.createElement("div"),t.attachToParent(!0)),t.setWrapperClassName(),t.container):null},t.setWrapperClassName=function(){var o=t.props.wrapperClassName;t.container&&o&&o!==t.container.className&&(t.container.className=o)},t.removeCurrentContainer=function(){var o,a;(o=t.container)===null||o===void 0||(a=o.parentNode)===null||a===void 0||a.removeChild(t.container)},t.switchScrollingEffect=function(){b===1&&!Object.keys(X).length?(se(),X=L({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):b||(L(X),X={},se(!0))},t.scrollLocker=new Le({container:P(r.getContainer)}),t}return ve(n,[{key:"componentDidMount",value:function(){var t=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=ie(function(){t.forceUpdate()}))}},{key:"componentDidUpdate",value:function(t){this.updateOpenCount(t),this.updateScrollLocker(t),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var t=this.props,o=t.visible,a=t.getContainer;A&&P(a)===document.body&&(b=o&&b?b-1:b),this.removeCurrentContainer(),ie.cancel(this.rafId)}},{key:"render",value:function(){var t=this.props,o=t.children,a=t.forceRender,l=t.visible,s=null,c={getOpenCount:function(){return b},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(a||l||this.componentRef.current)&&(s=d(Ee,{getContainer:this.getContainer,ref:this.componentRef,children:o(c)})),s}}]),n}(f.exports.Component);function Me(){var e=p({},xe);return e.useId}var ce=0;function Ae(e){var i=f.exports.useState("ssr-id"),n=Y(i,2),r=n[0],t=n[1],o=Me(),a=o==null?void 0:o();return f.exports.useEffect(function(){if(!o){var l=ce;ce+=1,t("rc_unique_".concat(l))}},[]),e||a||r}function We(e){var i=e.prefixCls,n=e.style,r=e.visible,t=e.maskProps,o=e.motionName;return d(he,{visible:r,motionName:o,leavedClassName:"".concat(i,"-mask-hidden"),children:function(a){var l=a.className,s=a.style;return d("div",{style:p(p({},s),n),className:W("".concat(i,"-mask"),l),...t})}},"mask")}function le(e,i,n){var r=i;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function ue(e,i){var n=e["page".concat(i?"Y":"X","Offset")],r="scroll".concat(i?"Top":"Left");if(typeof n!="number"){var t=e.document;n=t.documentElement[r],typeof n!="number"&&(n=t.body[r])}return n}function Ue(e){var i=e.getBoundingClientRect(),n={left:i.left,top:i.top},r=e.ownerDocument,t=r.defaultView||r.parentWindow;return n.left+=ue(t),n.top+=ue(t,!0),n}const Ve=f.exports.memo(function(e){var i=e.children;return i},function(e,i){var n=i.shouldUpdate;return!n});var fe={width:0,height:0,overflow:"hidden",outline:"none"},je=oe.forwardRef(function(e,i){var n=e.prefixCls,r=e.className,t=e.style,o=e.title,a=e.ariaId,l=e.footer,s=e.closable,c=e.closeIcon,u=e.onClose,v=e.children,m=e.bodyStyle,R=e.bodyProps,k=e.modalRender,N=e.onMouseDown,$=e.onMouseUp,D=e.holderRef,S=e.visible,E=e.forceRender,C=e.width,x=e.height,w=f.exports.useRef(),_=f.exports.useRef();oe.useImperativeHandle(i,function(){return{focus:function(){var y;(y=w.current)===null||y===void 0||y.focus()},changeActive:function(y){var M=document,H=M.activeElement;y&&H===_.current?w.current.focus():!y&&H===w.current&&_.current.focus()}}});var I={};C!==void 0&&(I.width=C),x!==void 0&&(I.height=x);var U;l&&(U=d("div",{className:"".concat(n,"-footer"),children:l}));var V;o&&(V=d("div",{className:"".concat(n,"-header"),children:d("div",{className:"".concat(n,"-title"),id:a,children:o})}));var j;s&&(j=d("button",{type:"button",onClick:u,"aria-label":"Close",className:"".concat(n,"-close"),children:c||d("span",{className:"".concat(n,"-close-x")})}));var z=Z("div",{className:"".concat(n,"-content"),children:[j,V,d("div",{className:"".concat(n,"-body"),style:m,...R,children:v}),U]});return Z("div",{role:"dialog","aria-labelledby":o?a:null,"aria-modal":"true",ref:D,style:p(p({},t),I),className:W(n,r),onMouseDown:N,onMouseUp:$,children:[d("div",{tabIndex:0,ref:w,style:fe,"aria-hidden":"true"}),d(Ve,{shouldUpdate:S||E,children:k?k(z):z}),d("div",{tabIndex:0,ref:_,style:fe,"aria-hidden":"true"})]},"dialog-element")}),pe=f.exports.forwardRef(function(e,i){var n=e.prefixCls,r=e.title,t=e.style,o=e.className,a=e.visible,l=e.forceRender,s=e.destroyOnClose,c=e.motionName,u=e.ariaId,v=e.onVisibleChanged,m=e.mousePosition,R=f.exports.useRef(),k=f.exports.useState(),N=Y(k,2),$=N[0],D=N[1],S={};$&&(S.transformOrigin=$);function E(){var C=Ue(R.current);D(m?"".concat(m.x-C.left,"px ").concat(m.y-C.top,"px"):"")}return d(he,{visible:a,onVisibleChanged:v,onAppearPrepare:E,onEnterPrepare:E,forceRender:l,motionName:c,removeOnLeave:s,ref:R,children:function(C,x){var w=C.className,_=C.style;return d(je,{...e,ref:i,title:r,ariaId:u,prefixCls:n,holderRef:x,style:p(p(p({},_),t),S),className:W(o,w)})}})});pe.displayName="Content";function de(e){var i=e.prefixCls,n=i===void 0?"rc-dialog":i,r=e.zIndex,t=e.visible,o=t===void 0?!1:t,a=e.keyboard,l=a===void 0?!0:a,s=e.focusTriggerAfterClose,c=s===void 0?!0:s,u=e.scrollLocker,v=e.wrapStyle,m=e.wrapClassName,R=e.wrapProps,k=e.onClose,N=e.afterClose,$=e.transitionName,D=e.animation,S=e.closable,E=S===void 0?!0:S,C=e.mask,x=C===void 0?!0:C,w=e.maskTransitionName,_=e.maskAnimation,I=e.maskClosable,U=I===void 0?!0:I,V=e.maskStyle,j=e.maskProps,z=e.rootClassName,T=f.exports.useRef(),y=f.exports.useRef(),M=f.exports.useRef(),H=f.exports.useState(o),ee=Y(H,2),B=ee[0],te=ee[1],ye=Ae();function be(h){if(h){if(!Te(y.current,document.activeElement)){var O;T.current=document.activeElement,(O=M.current)===null||O===void 0||O.focus()}}else{if(te(!1),x&&T.current&&c){try{T.current.focus({preventScroll:!0})}catch{}T.current=null}B&&(N==null||N())}}function q(h){k==null||k(h)}var K=f.exports.useRef(!1),F=f.exports.useRef(),ke=function(){clearTimeout(F.current),K.current=!0},Ne=function(){F.current=setTimeout(function(){K.current=!1})},ne=null;U&&(ne=function(O){K.current?K.current=!1:y.current===O.target&&q(O)});function we(h){if(l&&h.keyCode===ae.ESC){h.stopPropagation(),q(h);return}o&&h.keyCode===ae.TAB&&M.current.changeActive(!h.shiftKey)}return f.exports.useEffect(function(){return o&&te(!0),function(){}},[o]),f.exports.useEffect(function(){return function(){clearTimeout(F.current)}},[]),f.exports.useEffect(function(){return B?(u==null||u.lock(),u==null?void 0:u.unLock):function(){}},[B,u]),Z("div",{className:W("".concat(n,"-root"),z),...Ie(e,{data:!0}),children:[d(We,{prefixCls:n,visible:x&&o,motionName:le(n,w,_),style:p({zIndex:r},V),maskProps:j}),d("div",{tabIndex:-1,onKeyDown:we,className:W("".concat(n,"-wrap"),m),ref:y,onClick:ne,style:p(p({zIndex:r},v),{},{display:B?null:"none"}),...R,children:d(pe,{...e,onMouseDown:ke,onMouseUp:Ne,ref:M,closable:E,ariaId:ye,prefixCls:n,visible:o,onClose:q,onVisibleChanged:be,motionName:le(n,$,D)})})]})}var ze=function(i){var n=i.visible,r=i.getContainer,t=i.forceRender,o=i.destroyOnClose,a=o===void 0?!1:o,l=i.afterClose,s=f.exports.useState(n),c=Y(s,2),u=c[0],v=c[1];return f.exports.useEffect(function(){n&&v(!0)},[n]),r===!1?d(de,{...i,getOpenCount:function(){return 2}}):!t&&a&&!u?null:d(De,{visible:n,forceRender:t,getContainer:r,children:function(m){return d(de,{...i,destroyOnClose:a,afterClose:function(){l==null||l(),v(!1)},...m})}})};ze.displayName="Dialog";export{ze as D};
