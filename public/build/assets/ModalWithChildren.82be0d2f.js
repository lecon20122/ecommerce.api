import{r as m,j as c,a as M,F as U}from"./app.ceb08db3.js";import{u as ge,_ as A,B as G,an as ee,ao as he,f as ne,b as j,ai as ke,h as L,L as te,ap as oe,e as ye,aq as Pe,g as y,l as $,ar as be,as as Te,at as re,au as we,av as Oe,aw as Ne,ax as Se,i as Re}from"./getScrollBarSize.04a7ec97.js";import{c as V}from"./index.0579b088.js";import{D as pe}from"./DialogWrap.a78243da.js";function J(n){return!!(n&&!!n.then)}var _e=function(e){var o=m.exports.useRef(!1),t=m.exports.useRef(null),r=ge(!1),a=A(r,2),x=a[0],h=a[1],i=e.close,C=function(){i==null||i.apply(void 0,arguments)};m.exports.useEffect(function(){var s=null;return e.autoFocus&&(s=setTimeout(function(){var u;(u=t.current)===null||u===void 0||u.focus()})),function(){s&&clearTimeout(s)}},[]);var f=function(u){!J(u)||(h(!0),u.then(function(){h(!1,!0),C.apply(void 0,arguments),o.current=!1},function(k){console.error(k),h(!1,!0),o.current=!1}))},l=function(u){var k=e.actionFn;if(!o.current){if(o.current=!0,!k){C();return}var g;if(e.emitEvent){if(g=k(u),e.quitOnNullishReturnValue&&!J(g)){o.current=!1,C(u);return}}else if(k.length)g=k(i),o.current=!1;else if(g=k(),!g){C();return}f(g)}},d=e.type,P=e.children,b=e.prefixCls,T=e.buttonProps;return c(G,{...ee(d),onClick:l,loading:x,prefixCls:b,...T,ref:t,children:P})};const K=_e;var Fe=globalThis&&globalThis.__rest||function(n,e){var o={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(o[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(o[t[r]]=n[t[r]]);return o},X,Ie=function(e){X={x:e.pageX,y:e.pageY},setTimeout(function(){X=null},100)};he()&&document.documentElement.addEventListener("click",Ie,!0);var $e=function(e){var o,t=m.exports.useContext(ne),r=t.getPopupContainer,a=t.getPrefixCls,x=t.direction,h=function(R){var v=e.onCancel;v==null||v(R)},i=function(R){var v=e.onOk;v==null||v(R)},C=e.prefixCls,f=e.footer,l=e.visible,d=e.open,P=d===void 0?!1:d,b=e.wrapClassName,T=e.centered,s=e.getContainer,u=e.closeIcon,k=e.focusTriggerAfterClose,g=k===void 0?!0:k,N=e.width,w=N===void 0?520:N,p=Fe(e,["prefixCls","footer","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","width"]),S=a("modal",C),_=a(),z=c(te,{componentName:"Modal",defaultLocale:oe(),children:function(F){var R=e.okText,v=e.okType,W=v===void 0?"primary":v,q=e.cancelText,B=e.confirmLoading,Q=B===void 0?!1:B;return M(U,{children:[c(G,{onClick:h,...e.cancelButtonProps,children:q||F.cancelText}),c(G,{...ee(W),loading:Q,onClick:i,...e.okButtonProps,children:R!=null?R:F.okText})]})}}),D=c("span",{className:"".concat(S,"-close-x"),children:u||c(ye,{className:"".concat(S,"-close-icon")})}),H=V(b,(o={},j(o,"".concat(S,"-centered"),!!T),j(o,"".concat(S,"-wrap-rtl"),x==="rtl"),o));return c(ke,{status:!0,override:!0,children:c(pe,{width:w,...p,getContainer:s===void 0?r:s,prefixCls:S,wrapClassName:H,footer:f===void 0?z:f,visible:P||l,mousePosition:X,onClose:h,closeIcon:D,focusTriggerAfterClose:g,transitionName:L(_,"zoom",e.transitionName),maskTransitionName:L(_,"fade",e.maskTransitionName)})})};const ae=$e;var Ae=function(e){var o=e.icon,t=e.onCancel,r=e.onOk,a=e.close,x=e.zIndex,h=e.afterClose,i=e.visible,C=e.open,f=e.keyboard,l=e.centered,d=e.getContainer,P=e.maskStyle,b=e.okText,T=e.okButtonProps,s=e.cancelText,u=e.cancelButtonProps,k=e.direction,g=e.prefixCls,N=e.wrapClassName,w=e.rootPrefixCls,p=e.iconPrefixCls,S=e.bodyStyle,_=e.closable,z=_===void 0?!1:_,D=e.closeIcon,H=e.modalRender,F=e.focusTriggerAfterClose,R=e.okType||"primary",v="".concat(g,"-confirm"),W="okCancel"in e?e.okCancel:!0,q=e.width||416,B=e.style||{},Q=e.mask===void 0?!0:e.mask,ve=e.maskClosable===void 0?!1:e.maskClosable,Y=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",me=V(v,"".concat(v,"-").concat(e.type),j({},"".concat(v,"-rtl"),k==="rtl"),e.className),xe=W&&c(K,{actionFn:t,close:a,autoFocus:Y==="cancel",buttonProps:u,prefixCls:"".concat(w,"-btn"),children:s});return c(Pe,{prefixCls:w,iconPrefixCls:p,direction:k,children:c(ae,{prefixCls:g,className:me,wrapClassName:V(j({},"".concat(v,"-centered"),!!e.centered),N),onCancel:function(){return a==null?void 0:a({triggerCancel:!0})},open:C||i,title:"",footer:"",transitionName:L(w,"zoom",e.transitionName),maskTransitionName:L(w,"fade",e.maskTransitionName),mask:Q,maskClosable:ve,maskStyle:P,style:B,bodyStyle:S,width:q,zIndex:x,afterClose:h,keyboard:f,centered:l,getContainer:d,closable:z,closeIcon:D,modalRender:H,focusTriggerAfterClose:F,children:M("div",{className:"".concat(v,"-body-wrapper"),children:[M("div",{className:"".concat(v,"-body"),children:[o,e.title===void 0?null:c("span",{className:"".concat(v,"-title"),children:e.title}),c("div",{className:"".concat(v,"-content"),children:e.content})]}),M("div",{className:"".concat(v,"-btns"),children:[xe,c(K,{type:R,actionFn:r,close:a,autoFocus:Y==="ok",buttonProps:T,prefixCls:"".concat(w,"-btn"),children:b})]})]})})})};const le=Ae;var Ee=[];const I=Ee;var Be=globalThis&&globalThis.__rest||function(n,e){var o={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(o[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(o[t[r]]=n[t[r]]);return o},ie="";function Me(){return ie}function E(n){var e=document.createDocumentFragment(),o=y(y({},n),{close:x,open:!0}),t;function r(){for(var i=arguments.length,C=new Array(i),f=0;f<i;f++)C[f]=arguments[f];var l=C.some(function(b){return b&&b.triggerCancel});n.onCancel&&l&&n.onCancel.apply(n,[function(){}].concat($(C.slice(1))));for(var d=0;d<I.length;d++){var P=I[d];if(P===x){I.splice(d,1);break}}be(e)}function a(i){var C=i.okText,f=i.cancelText,l=i.prefixCls,d=Be(i,["okText","cancelText","prefixCls"]);clearTimeout(t),t=setTimeout(function(){var P=oe(),b=Se(),T=b.getPrefixCls,s=b.getIconPrefixCls,u=T(void 0,Me()),k=l||"".concat(u,"-modal"),g=s();Te(c(le,{...d,prefixCls:k,rootPrefixCls:u,iconPrefixCls:g,okText:C||(d.okCancel?P.okText:P.justOkText),cancelText:f||P.cancelText}),e)})}function x(){for(var i=this,C=arguments.length,f=new Array(C),l=0;l<C;l++)f[l]=arguments[l];o=y(y({},o),{open:!1,afterClose:function(){typeof n.afterClose=="function"&&n.afterClose(),r.apply(i,f)}}),o.visible&&delete o.visible,a(o)}function h(i){typeof i=="function"?o=i(o):o=y(y({},o),i),a(o)}return a(o),I.push(x),{destroy:x,update:h}}function ce(n){return y(y({icon:c(re,{}),okCancel:!1},n),{type:"warning"})}function se(n){return y(y({icon:c(we,{}),okCancel:!1},n),{type:"info"})}function ue(n){return y(y({icon:c(Oe,{}),okCancel:!1},n),{type:"success"})}function fe(n){return y(y({icon:c(Ne,{}),okCancel:!1},n),{type:"error"})}function de(n){return y(y({icon:c(re,{}),okCancel:!0},n),{type:"confirm"})}function je(n){var e=n.rootPrefixCls;ie=e}function Le(){var n=m.exports.useState([]),e=A(n,2),o=e[0],t=e[1],r=m.exports.useCallback(function(a){return t(function(x){return[].concat($(x),[a])}),function(){t(function(x){return x.filter(function(h){return h!==a})})}},[]);return[o,r]}var ze=function(e,o){var t=e.afterClose,r=e.config,a=m.exports.useState(!0),x=A(a,2),h=x[0],i=x[1],C=m.exports.useState(r),f=A(C,2),l=f[0],d=f[1],P=m.exports.useContext(ne),b=P.direction,T=P.getPrefixCls,s=T("modal"),u=T(),k=function(){i(!1);for(var N=arguments.length,w=new Array(N),p=0;p<N;p++)w[p]=arguments[p];var S=w.some(function(_){return _&&_.triggerCancel});l.onCancel&&S&&l.onCancel.apply(l,[function(){}].concat($(w.slice(1))))};return m.exports.useImperativeHandle(o,function(){return{destroy:k,update:function(N){d(function(w){return y(y({},w),N)})}}}),c(te,{componentName:"Modal",defaultLocale:Re.Modal,children:function(g){return c(le,{prefixCls:s,rootPrefixCls:u,...l,close:k,open:h,afterClose:t,okText:l.okText||(l.okCancel?g.okText:g.justOkText),direction:b,cancelText:l.cancelText||g.cancelText})}})};const De=m.exports.forwardRef(ze);var Z=0,He=m.exports.memo(m.exports.forwardRef(function(n,e){var o=Le(),t=A(o,2),r=t[0],a=t[1];return m.exports.useImperativeHandle(e,function(){return{patchElement:a}},[]),c(U,{children:r})}));function We(){var n=m.exports.useRef(null),e=m.exports.useState([]),o=A(e,2),t=o[0],r=o[1];m.exports.useEffect(function(){if(t.length){var h=$(t);h.forEach(function(i){i()}),r([])}},[t]);var a=m.exports.useCallback(function(h){return function(C){var f;Z+=1;var l=m.exports.createRef(),d,P=c(De,{config:h(C),ref:l,afterClose:function(){d==null||d()}},"modal-".concat(Z));return d=(f=n.current)===null||f===void 0?void 0:f.patchElement(P),{destroy:function(){function T(){var s;(s=l.current)===null||s===void 0||s.destroy()}l.current?T():r(function(s){return[].concat($(s),[T])})},update:function(T){function s(){var u;(u=l.current)===null||u===void 0||u.update(T)}l.current?s():r(function(u){return[].concat($(u),[s])})}}}},[]),x=m.exports.useMemo(function(){return{info:a(se),success:a(ue),error:a(fe),warning:a(ce),confirm:a(de)}},[]);return[x,c(He,{ref:n})]}function Ce(n){return E(ce(n))}var O=ae;O.useModal=We;O.info=function(e){return E(se(e))};O.success=function(e){return E(ue(e))};O.error=function(e){return E(fe(e))};O.warning=Ce;O.warn=Ce;O.confirm=function(e){return E(de(e))};O.destroyAll=function(){for(;I.length;){var e=I.pop();e&&e()}};O.config=je;const qe=O;function Je({openModal:n,onOk:e,onCancel:o,children:t,title:r}){return c(qe,{okButtonProps:{type:"default"},title:r,centered:!0,onOk:e,onCancel:o,open:n,footer:null,children:t})}export{Je as default};
