import{j as e,a as p,r as S,d as C,R as Y}from"./app.20d7a450.js";import{M as J}from"./MediaProductCollection.8259fdd9.js";import{h as I}from"./index.m.4f4de470.js";import{I as q}from"./ImageUploadManuallyComponent.6020db06.js";import V from"./ModalWithChildren.c11b1224.js";import{F as u,R as Q,C as X}from"./index.2b6dfb9b.js";import{I as G}from"./Helpers.e4c25188.js";import{u as Z,I as N}from"./index.d4f8ce5f.js";import{B as x}from"./styleChecker.d0e0c105.js";import ee from"./create.8f462dd9.js";import{T as te}from"./ToggleDeleteRestoreButton.a72fccf1.js";import{N as ae}from"./new-dashboard-layout.ca5ec6da.js";import{S as $}from"./index.fe7f7c74.js";import{g as ie,m as ne,r as oe,U as le,C as re,d as se}from"./zoom.43d26361.js";import{S as ce}from"./Skeleton.32054ccc.js";import{T as de}from"./Table.4ebdba9e.js";import"./index.cfa76313.js";import"./EyeOutlined.8d0a8f5c.js";import"./css.d6e3059f.js";import"./index.944d00ec.js";import"./index.7da7955d.js";import"./SwapOutlined.d54ad76d.js";import"./index.58585f40.js";import"./DeleteOutlined.431eb249.js";import"./ActionButton.12482c65.js";import"./index.c1954e64.js";import"./PlusOutlined.05ac82e5.js";import"./Overflow.9e164c9f.js";import"./Dropdown.54083811.js";const me=t=>{const{value:a,formatter:o,precision:n,decimalSeparator:l,groupSeparator:f="",prefixCls:r}=t;let s;if(typeof o=="function")s=o(a);else{const c=String(a),h=c.match(/^(-?)(\d*)(\.(\d+))?$/);if(!h||c==="-")s=c;else{const y=h[1];let d=h[2]||"0",m=h[4]||"";d=d.replace(/\B(?=(\d{3})+(?!\d))/g,f),typeof n=="number"&&(m=m.padEnd(n,"0").slice(0,n>0?n:0)),m&&(m=`${l}${m}`),s=[p("span",{className:`${r}-content-value-int`,children:[y,d]},"int"),m&&e("span",{className:`${r}-content-value-decimal`,children:m},"decimal")]}}return e("span",{className:`${r}-content-value`,children:s})},pe=me,ue=t=>{const{componentCls:a,marginXXS:o,padding:n,colorTextDescription:l,statisticTitleFontSize:f,colorTextHeading:r,statisticContentFontSize:s,statisticFontFamily:c}=t;return{[`${a}`]:Object.assign(Object.assign({},oe(t)),{[`${a}-title`]:{marginBottom:o,color:l,fontSize:f},[`${a}-skeleton`]:{paddingTop:n},[`${a}-content`]:{color:r,fontSize:s,fontFamily:c,[`${a}-content-value`]:{display:"inline-block",direction:"ltr"},[`${a}-content-prefix, ${a}-content-suffix`]:{display:"inline-block"},[`${a}-content-prefix`]:{marginInlineEnd:o},[`${a}-content-suffix`]:{marginInlineStart:o}}})}},fe=ie("Statistic",t=>{const{fontSizeHeading3:a,fontSize:o,fontFamily:n}=t,l=ne(t,{statisticTitleFontSize:o,statisticContentFontSize:a,statisticFontFamily:n});return[ue(l)]}),he=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function ve(t,a){let o=t;const n=/\[[^\]]*]/g,l=(a.match(n)||[]).map(c=>c.slice(1,-1)),f=a.replace(n,"[]"),r=he.reduce((c,h)=>{let[y,d]=h;if(c.includes(y)){const m=Math.floor(o/d);return o-=m*d,c.replace(new RegExp(`${y}+`,"g"),k=>{const b=k.length;return m.toString().padStart(b,"0")})}return c},f);let s=0;return r.replace(n,()=>{const c=l[s];return s+=1,c})}function ye(t,a){const{format:o=""}=a,n=new Date(t).getTime(),l=Date.now(),f=Math.max(n-l,0);return ve(f,o)}const Se=1e3/30;function ge(t){return new Date(t).getTime()}const xe=t=>{const{value:a,format:o="HH:mm:ss",onChange:n,onFinish:l}=t,f=Z(),r=S.exports.useRef(null),s=()=>{l==null||l(),r.current&&(clearInterval(r.current),r.current=null)},c=()=>{const d=ge(a);d>=Date.now()&&(r.current=setInterval(()=>{f(),n==null||n(d-Date.now()),d<Date.now()&&s()},Se))};return S.exports.useEffect(()=>(c(),()=>{r.current&&(clearInterval(r.current),r.current=null)}),[a]),e(z,{...Object.assign({},t,{valueRender:d=>le(d,{title:void 0}),formatter:(d,m)=>ye(d,Object.assign(Object.assign({},m),{format:o}))})})},Ce=S.exports.memo(xe),K=t=>{const{prefixCls:a,className:o,rootClassName:n,style:l,valueStyle:f,value:r=0,title:s,valueRender:c,prefix:h,suffix:y,loading:d=!1,onMouseEnter:m,onMouseLeave:k,decimalSeparator:b=".",groupSeparator:F=","}=t,{getPrefixCls:R,direction:O}=S.exports.useContext(re),v=R("statistic",a),[w,A]=fe(v),T=e(pe,{...Object.assign({decimalSeparator:b,groupSeparator:F,prefixCls:v},t,{value:r})}),D=se(v,{[`${v}-rtl`]:O==="rtl"},o,n,A);return w(p("div",{className:D,style:l,onMouseEnter:m,onMouseLeave:k,children:[s&&e("div",{className:`${v}-title`,children:s}),e(ce,{paragraph:!1,loading:d,className:`${v}-skeleton`,children:p("div",{style:f,className:`${v}-content`,children:[h&&e("span",{className:`${v}-content-prefix`,children:h}),c?c(T):T,y&&e("span",{className:`${v}-content-suffix`,children:y})]})})]}))};K.Countdown=Ce;const z=K;function Ie({openAddStock:t,openSubtractStock:a,setOpenAddStock:o,setOpenSubtractStock:n,currentVariationId:l}){const f=s=>{C.Inertia.post(I("admin.add.stock"),s,{preserveState:!1})},r=s=>{C.Inertia.post(I("admin.subtract.stock"),s,{preserveState:!1})};return p("div",{children:[e(V,{title:"Add New Stock",openModal:t,onOk:()=>o(!1),onCancel:()=>o(!1),children:p(u,{onFinish:f,children:[e(u.Item,{label:"New Stock Amount",name:"amount",rules:[{required:!0,type:"integer",message:"Stock Amount is required"}],children:e(G,{prefix:"+",min:1,max:1e3})}),e(u.Item,{hidden:!0,name:"variation_id",initialValue:l,children:e(N,{})}),e(u.Item,{children:e(x,{type:"default",htmlType:"submit",children:"Submit"})})]})}),e(V,{title:"Remove Stock Amount",openModal:a,onOk:()=>n(!1),onCancel:()=>n(!1),children:p(u,{onFinish:r,children:[e(u.Item,{label:"Remove Stock Amount",name:"amount",rules:[{required:!0,type:"integer",message:"Stock Amount to remove is required"}],children:e(G,{prefix:"-",min:1,max:1e3})}),e(u.Item,{hidden:!0,name:"variation_id",initialValue:l,children:e(N,{})}),e(u.Item,{children:e(x,{type:"default",htmlType:"submit",children:"Submit"})})]})})]})}function Qe({currentVariation:t,variationTypesValues:a,variationTypes:o,locale:n}){var E,M,j,L,U,P,H,B;const[l,f]=S.exports.useState(0),[r,s]=S.exports.useState(!1),[c,h]=S.exports.useState(!1),[y,d]=S.exports.useState(!1),[m,k]=S.exports.useState(),b=i=>{C.Inertia.post(I("admin.variations.restore",i.id),void 0,{preserveState:!1})},F=i=>{C.Inertia.get(I("admin.variations.edit",i.id))},R=i=>{C.Inertia.post(I("admin.variations.destroy",i.id),void 0,{preserveState:!1})},O=i=>p(Y.Fragment,{children:[e(te,{handleOnClickRestore:b,handleOnClickDelete:R,params:i}),e(x,{className:"mr-2",onClick:()=>F(i),children:"UPDATE"})]}),v=[{title:"ID",dataIndex:"id",key:"id"},{title:"Variation Type Value",dataIndex:"variation_type_value",key:"variation_type_value",render:(i,g)=>{var _;return e("span",{children:(_=g.variation_type_value)==null?void 0:_.value.en})}},{title:"Variation Type",dataIndex:"variation_type",key:"variation_type",render:(i,g)=>{var _;return e("span",{children:(_=g.variation_type)==null?void 0:_.type.en})}},{title:"Price",dataIndex:"price",key:"price"},{title:"Order",dataIndex:"order",key:"order",responsive:["lg"]},{title:"Deleted at",dataIndex:"deleted_at",key:"deleted_at",responsive:["lg"]},{title:"Action",dataIndex:"",key:"x",render:(i,g)=>O(g)}],[w]=u.useForm(),A=i=>{C.Inertia.post(I("admin.variations.update",t),i,{preserveState:!1})},T=o.map(i=>e($.Option,{value:i.id,children:i.type.en},i.id)),D=m==null?void 0:m.map(i=>e($.Option,{value:i.id,children:i.value.en},i.id)),W=i=>{f(i)};return S.exports.useEffect(()=>{const i=a.filter(g=>g.variation_type_id==l);k(i)},[l]),e(ae,{children:p("div",{className:"container mx-auto",children:[p(Q,{gutter:16,className:"text-center py-5 border border-b-black border-1 p-1",children:[e(X,{span:12,className:"flex items-center justify-center",children:(E=t.variation_type)!=null&&E.is_stockable?p("div",{className:"flex-col items-center justify-center space-y-2 space-x-2",children:[p("h1",{children:["Available Stock : ",t.stock_count]}),e(x,{size:"large",onClick:()=>s(!0),children:"Add Stock"}),e(x,{size:"large",onClick:()=>d(!0),children:"Remove Stock"})]}):e(x,{size:"large",onClick:i=>h(!0),children:"Add Size"})}),p(X,{span:12,className:"flex space-x-2 items-center justify-center",children:[e(z,{title:"Current Type",value:(M=t.variation_type)==null?void 0:M.type.en.toUpperCase()}),e(z,{title:"Value",value:(j=t.variation_type_value)==null?void 0:j.value.en,precision:2,valueStyle:{color:(L=t.variation_type_value)==null?void 0:L.value.en.toLowerCase()}})]})]}),e(Ie,{setOpenAddStock:s,openAddStock:r,setOpenSubtractStock:d,openSubtractStock:y,currentVariationId:t.id}),p("div",{className:"grid grid-cols-2",children:[e("div",{className:"col-1",children:p(u,{form:w,name:"horizontal_login",layout:"horizontal",onFinish:A,className:"py-5 px-5",size:"large",children:[e(u.Item,{initialValue:t.title,label:"Title",name:"title",children:e(N,{placeholder:"Title"})}),e(u.Item,{initialValue:t.order,label:"Order",name:"order",children:e(N,{placeholder:"Order",type:"number"})}),e(u.Item,{initialValue:t.price,label:"Price EN",name:"price",children:e(N,{placeholder:"Title",type:"number",prefix:"EGP"})}),e(u.Item,{label:"Type List",name:"variation_type_id",initialValue:(U=t.variation_type)==null?void 0:U.id,children:e($,{allowClear:!0,onSelect:i=>W(i),children:T})}),e(u.Item,{initialValue:(P=t.variation_type_value)==null?void 0:P.id,label:"Type Value List",name:"variation_type_value_id",children:e($,{allowClear:!0,children:D})}),e(u.Item,{shouldUpdate:!0,children:()=>e(x,{type:"default",size:"large",htmlType:"submit",children:"Update"})})]})}),((H=t.variation_type)==null?void 0:H.is_mediable)&&p("div",{className:"p-2",children:[e("h1",{className:"",children:"Variation Images Max : 6"}),e(J,{params:t,media:t.media,deleteURL:"admin.delete.media.of.variations",variationColor:t.color}),p("div",{className:"flex flex-wrap space-x-1",children:[e(q,{param:t,buttonLabel:"Upload Images",routeName:"admin.add.media.to.variation",multiple:!0}),e(q,{param:t,routeName:"admin.add.color.image.to.variation",multiple:!1,buttonLabel:"Color Image"})]})]})]}),p("div",{children:[e(ee,{handleAddDialog:i=>h(!1),openAddDialog:c,productId:t.product_id,locale:n,variationTypes:o,variationTypesValues:a,store_id:t.store_id,parentId:t.id}),((B=t.variation_type)==null?void 0:B.type.en)==="color"&&e(de,{columns:v,rowKey:"id",dataSource:t.children,scroll:{x:!0}})]})]})})}export{Qe as default};
