import{D as T}from"./dashboard.ace78741.js";import{r as V,j as e,a as t,d as f,u as w}from"./app.729b6301.js";import{h as u}from"./index.m.9084c204.js";import{u as v,F as A}from"./index.esm.6ea3c5b9.js";import{A as d}from"./alert.86d2cc60.js";import{I as L,a as C}from"./ImageListItem.cc7b0798.js";import{I as F}from"./ImageListItemBar.7be13d61.js";import{B as b}from"./Button.e586ca86.js";import W from"./variationList.582585f8.js";import{T as m}from"./TextField.b2584131.js";import"./index.es.c9fecc0d.js";import"./portal.esm.8b3bea6b.js";import"./objectWithoutPropertiesLoose.d29fb19f.js";import"./assertThisInitialized.6716b1bb.js";import"./useThemeProps.60f0af7c.js";import"./isMuiElement.f837451b.js";import"./DataGrid.8108a846.js";import"./create.bb900140.js";import"./formDialog.b9c6dfde.js";import"./DialogTitle.074966ac.js";import"./index.es.d8ac1d95.js";function j({product:i}){var c;const[n,l]=V.exports.useState(!1),o=()=>{l(!n)},p=a=>{f.Inertia.post(u("admin.delete.media.of.product",i),{id:a})};return e(L,{cols:6,className:"mx-auto",children:(c=i.media)==null?void 0:c.map((a,x)=>t(C,{sx:{height:"100% !important"},children:[e("img",{src:a.thumbnail,alt:a.name,loading:"lazy",onClick:o}),e(F,{actionIcon:e("div",{children:e(b,{onClick:g=>p(a.id),color:"error",children:"delete"})})})]},a.id))})}function te({currentProduct:i,locale:n}){console.log(i);const l=v({mode:"onChange"}),{register:o,handleSubmit:p,formState:{errors:c,isDirty:a,isValid:x},getValues:g,reset:y}=l,{register:I,formState:{errors:B},handleSubmit:N}=v(),r=w().props.errors,S=s=>{const h={...s};f.Inertia.post(u("admin.products.update",i),h,{preserveState:!1}),y(g())},D=s=>{const h={...s};f.Inertia.post(u("admin.add.media.to.product",i),h),console.log(s)};return e(T,{children:t("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col my-2",children:[e(A,{...l,children:t("form",{onSubmit:p(S),encType:"multipart/form-data",className:"mb-3",children:[t("div",{className:"-mx-3 md:flex mb-6",children:[t("div",{className:"md:w-1/4 px-3 mb-6 md:mb-0",children:[e(m,{...o("ar"),name:"ar",fullWidth:!0,label:"Product Title AR",defaultValue:i.title.ar}),r.title&&e(d,{text:r.title,type:"red"})]}),t("div",{className:"md:w-1/4 px-3 mb-6 md:mb-0",children:[e(m,{...o("en"),name:"en",fullWidth:!0,label:"Product Title EN",defaultValue:i.title.en,placeholder:i.title.en}),r.title&&e(d,{text:r.title,type:"red"})]}),t("div",{className:"md:w-1/4 px-3",children:[e(m,{type:"number",...o("price",{valueAsNumber:!0}),name:"price",fullWidth:!0,label:"Price",defaultValue:i.price,placeholder:i.price}),r.price&&e(d,{text:r.price,type:"red"})]}),t("div",{className:"md:w-1/4 px-3",children:[e(m,{...o("description"),name:"description",fullWidth:!0,label:"Description",defaultValue:i.description,placeholder:i.description}),r.description&&e(d,{text:r.description,type:"red"})]})]}),e("div",{className:"flex gap-2",children:e(b,{disabled:!a||!x,type:"submit",color:"primary",variant:"contained",children:"save changes"})})]})}),t("form",{onSubmit:N(D),children:[e("input",{multiple:!0,type:"file",...I("images")}),e(b,{type:"submit",color:"primary",variant:"contained",children:"upload"})]}),e("div",{className:"-mx-3 md:flex mb-6 py-3",children:e(j,{product:i})}),e(W,{variations:i.variations,locale:n,productId:i.id})]})})}export{te as default};
