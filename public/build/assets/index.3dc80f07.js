import{w as Be,b as dt,J as pt,C as nt,_ as $e,h as qe}from"./type.33648741.js";import{b as h,c as y,a as G,_ as Te,f as ze,A as De}from"./AntdIcon.373aa9e9.js";import{u as it,a as Pe,E as mt}from"./EyeOutlined.ec67b3b0.js";import{r as i,a as se,j as c,F as Ke}from"./app.8002bbaa.js";import{c as J}from"./index.0579b088.js";import{g as gt,a as wt,L as Ct,R as ht}from"./css.abac685d.js";import{D as Pt,P as xt}from"./DialogWrap.c318e395.js";import{K as Je}from"./getScrollBarSize.7581f654.js";import{g as Ee}from"./motion.b954a79b.js";function St(o){var e=i.exports.useRef(null),n=i.exports.useState(o),t=h(n,2),a=t[0],u=t[1],v=i.exports.useRef([]),s=function(g){e.current===null&&(v.current=[],e.current=Be(function(){u(function(f){var w=f;return v.current.forEach(function(P){w=y(y({},w),P)}),e.current=null,w})})),v.current.push(g)};return i.exports.useEffect(function(){return function(){return e.current&&Be.cancel(e.current)}},[]),[a,s]}function Qe(o,e,n,t){var a=e+n,u=(n-t)/2;if(n>t){if(e>0)return G({},o,u);if(e<0&&a<t)return G({},o,-u)}else if(e<0||a>t)return G({},o,e<0?u:-u);return{}}function yt(o,e,n,t){var a=gt(),u=a.width,v=a.height,s=null;return o<=u&&e<=v?s={x:0,y:0}:(o>u||e>v)&&(s=y(y({},Qe("x",n,o,u)),Qe("y",t,e,v))),s}var bt=["visible","onVisibleChange","getContainer","current","countRender"],Xe=i.exports.createContext({previewUrls:new Map,setPreviewUrls:function(){return null},current:null,setCurrent:function(){return null},setShowPreview:function(){return null},setMousePosition:function(){return null},registerImage:function(){return function(){return null}},rootClassName:""}),Rt=Xe.Provider,Ot=function(e){var n=e.previewPrefixCls,t=n===void 0?"rc-image-preview":n,a=e.children,u=e.icons,v=u===void 0?{}:u,s=e.preview,m=Te(s)==="object"?s:{},g=m.visible,f=g===void 0?void 0:g,w=m.onVisibleChange,P=w===void 0?void 0:w,M=m.getContainer,k=M===void 0?void 0:M,L=m.current,U=L===void 0?0:L,Q=m.countRender,W=Q===void 0?void 0:Q,le=ze(m,bt),xe=i.exports.useState(new Map),ce=h(xe,2),ee=ce[0],te=ce[1],Se=i.exports.useState(),ue=h(Se,2),ve=ue[0],re=ue[1],fe=it(!!f,{value:f,onChange:P}),N=h(fe,2),_=N[0],de=N[1],oe=i.exports.useState(null),x=h(oe,2),V=x[0],ne=x[1],H=f!==void 0,b=Array.from(ee.keys()),R=b[U],$=new Map(Array.from(ee).filter(function(E){var C=h(E,2),T=C[1].canPreview;return!!T}).map(function(E){var C=h(E,2),T=C[0],D=C[1].url;return[T,D]})),z=function(C,T){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,Z=function(){te(function(K){var I=new Map(K),O=I.delete(C);return O?I:K})};return te(function(Y){return new Map(Y).set(C,{url:T,canPreview:D})}),Z},pe=function(C){C.stopPropagation(),de(!1),ne(null)};return i.exports.useEffect(function(){re(R)},[R]),i.exports.useEffect(function(){!_&&H&&re(R)},[R,H,_]),se(Rt,{value:{isPreviewGroup:!0,previewUrls:$,setPreviewUrls:te,current:ve,setCurrent:re,setShowPreview:de,setMousePosition:ne,registerImage:z},children:[a,c(at,{"aria-hidden":!_,visible:_,prefixCls:t,onClose:pe,mousePosition:V,src:$.get(ve),icons:v,getContainer:k,countRender:W,...le})]})},Nt=["prefixCls","src","alt","onClose","afterClose","visible","icons","rootClassName","getContainer","countRender","scaleStep","transitionName","maskTransitionName"],Le=i.exports.useState,et=i.exports.useEffect,Mt=i.exports.useCallback,tt=i.exports.useRef,kt=i.exports.useContext,ae={x:0,y:0},at=function(e){var n,t=e.prefixCls,a=e.src,u=e.alt,v=e.onClose;e.afterClose;var s=e.visible,m=e.icons,g=m===void 0?{}:m,f=e.rootClassName,w=e.getContainer,P=e.countRender,M=e.scaleStep,k=M===void 0?.5:M,L=e.transitionName,U=L===void 0?"zoom":L,Q=e.maskTransitionName,W=Q===void 0?"fade":Q,le=ze(e,Nt),xe=g.rotateLeft,ce=g.rotateRight,ee=g.zoomIn,te=g.zoomOut,Se=g.close,ue=g.left,ve=g.right,re=Le(1),fe=h(re,2),N=fe[0],_=fe[1],de=Le(0),oe=h(de,2),x=oe[0],V=oe[1],ne=St(ae),H=h(ne,2),b=H[0],R=H[1],$=tt(),z=tt({originX:0,originY:0,deltaX:0,deltaY:0}),pe=Le(!1),E=h(pe,2),C=E[0],T=E[1],D=kt(Xe),Z=D.previewUrls,Y=D.current,K=D.isPreviewGroup,I=D.setCurrent,O=Z.size,A=Array.from(Z.keys()),S=A.indexOf(Y),Re=K?Z.get(Y):a,X=K&&O>1,me=K&&O>=1,je=Le({wheelDirection:0}),ye=h(je,2),Oe=ye[0],Ne=ye[1],ge=function(){_(1),V(0),R(ae)},B=function(){_(function(r){return r+k}),R(ae)},we=function(){N>1&&_(function(r){return r-k}),R(ae)},Ge=function(){V(function(r){return r+90})},Ue=function(){V(function(r){return r-90})},Ve=function(r){r.preventDefault(),r.stopPropagation(),S>0&&I(A[S-1])},Me=function(r){r.preventDefault(),r.stopPropagation(),S<O-1&&I(A[S+1])},He=J(G({},"".concat(t,"-moving"),C)),Ae="".concat(t,"-operations-operation"),be="".concat(t,"-operations-icon"),ie=[{icon:Se,onClick:v,type:"close"},{icon:ee,onClick:B,type:"zoomIn"},{icon:te,onClick:we,type:"zoomOut",disabled:N===1},{icon:ce,onClick:Ge,type:"rotateRight"},{icon:xe,onClick:Ue,type:"rotateLeft"}],Ce=function(){if(s&&C){var r=$.current.offsetWidth*N,d=$.current.offsetHeight*N,p=$.current.getBoundingClientRect(),F=p.left,q=p.top,j=x%180!==0;T(!1);var he=yt(j?d:r,j?r:d,F,q);he&&R(y({},he))}},ke=function(r){r.button===0&&(r.preventDefault(),r.stopPropagation(),z.current.deltaX=r.pageX-b.x,z.current.deltaY=r.pageY-b.y,z.current.originX=b.x,z.current.originY=b.y,T(!0))},_e=function(r){s&&C&&R({x:r.pageX-z.current.deltaX,y:r.pageY-z.current.deltaY})},Fe=function(r){if(!!s){r.preventDefault();var d=r.deltaY;Ne({wheelDirection:d})}},Ie=Mt(function(l){!s||!X||(l.keyCode===Je.LEFT?S>0&&I(A[S-1]):l.keyCode===Je.RIGHT&&S<O-1&&I(A[S+1]))},[S,O,A,I,X,s]),We=function(){s&&(N!==1&&_(1),(b.x!==ae.x||b.y!==ae.y)&&R(ae))};et(function(){var l=Oe.wheelDirection;l>0?we():l<0&&B()},[Oe]),et(function(){var l,r,d=Pe(window,"mouseup",Ce,!1),p=Pe(window,"mousemove",_e,!1),F=Pe(window,"wheel",Fe,{passive:!1}),q=Pe(window,"keydown",Ie,!1);try{window.top!==window.self&&(l=Pe(window.top,"mouseup",Ce,!1),r=Pe(window.top,"mousemove",_e,!1))}catch{}return function(){var j,he;d.remove(),p.remove(),F.remove(),q.remove(),(j=l)===null||j===void 0||j.remove(),(he=r)===null||he===void 0||he.remove()}},[s,C,Ie]);var Ye=se(Ke,{children:[X&&c("div",{className:J("".concat(t,"-switch-left"),G({},"".concat(t,"-switch-left-disabled"),S===0)),onClick:Ve,children:ue}),X&&c("div",{className:J("".concat(t,"-switch-right"),G({},"".concat(t,"-switch-right-disabled"),S===O-1)),onClick:Me,children:ve}),se("ul",{className:"".concat(t,"-operations"),children:[me&&c("li",{className:"".concat(t,"-operations-progress"),children:(n=P==null?void 0:P(S+1,O))!==null&&n!==void 0?n:"".concat(S+1," / ").concat(O)}),ie.map(function(l){var r,d=l.icon,p=l.onClick,F=l.type,q=l.disabled;return c("li",{className:J(Ae,(r={},G(r,"".concat(t,"-operations-operation-").concat(F),!0),G(r,"".concat(t,"-operations-operation-disabled"),!!q),r)),onClick:p,children:i.exports.isValidElement(d)?i.exports.cloneElement(d,{className:be}):d},F)})]})]});return se(Ke,{children:[c(Pt,{transitionName:U,maskTransitionName:W,closable:!1,keyboard:!0,prefixCls:t,onClose:v,afterClose:ge,visible:s,wrapClassName:He,rootClassName:f,getContainer:w,...le,children:c("div",{className:"".concat(t,"-img-wrapper"),style:{transform:"translate3d(".concat(b.x,"px, ").concat(b.y,"px, 0)")},children:c("img",{width:e.width,height:e.height,onMouseDown:ke,onDoubleClick:We,ref:$,className:"".concat(t,"-img"),src:Re,alt:u,style:{transform:"scale3d(".concat(N,", ").concat(N,", 1) rotate(").concat(x,"deg)")}})})}),c(dt,{visible:s,motionName:W,children:function(l){var r=l.className,d=l.style;return c(xt,{open:!0,getContainer:w,children:c("div",{className:J("".concat(t,"-operations-wrapper"),r,f),style:d,children:Ye})})}})]})},_t=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap","draggable"],It=["src","visible","onVisibleChange","getContainer","mask","maskClassName","icons","scaleStep"],rt=0,Ze=function(e){var n,t=e.src,a=e.alt,u=e.onPreviewClose,v=e.prefixCls,s=v===void 0?"rc-image":v,m=e.previewPrefixCls,g=m===void 0?"".concat(s,"-preview"):m,f=e.placeholder,w=e.fallback,P=e.width,M=e.height,k=e.style,L=e.preview,U=L===void 0?!0:L,Q=e.className,W=e.onClick,le=e.onError,xe=e.wrapperClassName,ce=e.wrapperStyle,ee=e.rootClassName,te=e.crossOrigin,Se=e.decoding,ue=e.loading,ve=e.referrerPolicy,re=e.sizes,fe=e.srcSet,N=e.useMap,_=e.draggable,de=ze(e,_t),oe=f&&f!==!0,x=Te(U)==="object"?U:{},V=x.src,ne=x.visible,H=ne===void 0?void 0:ne,b=x.onVisibleChange,R=b===void 0?u:b,$=x.getContainer,z=$===void 0?void 0:$,pe=x.mask,E=x.maskClassName,C=x.icons,T=x.scaleStep,D=ze(x,It),Z=V!=null?V:t,Y=H!==void 0,K=it(!!H,{value:H,onChange:R}),I=h(K,2),O=I[0],A=I[1],S=i.exports.useState(oe?"loading":"normal"),Re=h(S,2),X=Re[0],me=Re[1],je=i.exports.useState(null),ye=h(je,2),Oe=ye[0],Ne=ye[1],ge=X==="error",B=i.exports.useContext(Xe),we=B.isPreviewGroup,Ge=B.setCurrent,Ue=B.setShowPreview,Ve=B.setMousePosition,Me=B.registerImage,He=i.exports.useState(function(){return rt+=1,rt}),Ae=h(He,1),be=Ae[0],ie=!!U,Ce=i.exports.useRef(!1),ke=function(){me("normal")},_e=function(p){le&&le(p),me("error")},Fe=function(p){if(!Y){var F=wt(p.target),q=F.left,j=F.top;we?(Ge(be),Ve({x:q,y:j})):Ne({x:q,y:j})}we?Ue(!0):A(!0),W&&W(p)},Ie=function(p){p.stopPropagation(),A(!1),Y||Ne(null)},We=function(p){Ce.current=!1,X==="loading"&&p!=null&&p.complete&&(p.naturalWidth||p.naturalHeight)&&(Ce.current=!0,ke())};i.exports.useEffect(function(){var d=Me(be,Z);return d},[]),i.exports.useEffect(function(){Me(be,Z,ie)},[Z,ie]),i.exports.useEffect(function(){ge&&me("normal"),oe&&!Ce.current&&me("loading")},[t]);var Ye=J(s,xe,ee,G({},"".concat(s,"-error"),ge)),l=ge&&w?w:Z,r={crossOrigin:te,decoding:Se,draggable:_,loading:ue,referrerPolicy:ve,sizes:re,srcSet:fe,useMap:N,alt:a,className:J("".concat(s,"-img"),G({},"".concat(s,"-img-placeholder"),f===!0),Q),style:y({height:M},k)};return se(Ke,{children:[se("div",{...de,className:Ye,onClick:ie?Fe:W,style:y({width:P,height:M},ce),children:[c("img",{...r,ref:We,...ge&&w?{src:w}:{onLoad:ke,onError:_e,src:t},width:P,height:M}),X==="loading"&&c("div",{"aria-hidden":"true",className:"".concat(s,"-placeholder"),children:f}),pe&&ie&&c("div",{className:J("".concat(s,"-mask"),E),style:{display:((n=r.style)===null||n===void 0?void 0:n.display)==="none"?"none":void 0},children:pe})]}),!we&&ie&&c(at,{"aria-hidden":!O,visible:O,prefixCls:g,onClose:Ie,mousePosition:Oe,src:l,alt:a,getContainer:z,icons:C,scaleStep:T,rootClassName:ee,...D})]})};Ze.PreviewGroup=Ot;Ze.displayName="Image";var Lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};const $t=Lt;var st=function(e,n){return c(De,{...y(y({},e),{},{ref:n,icon:$t})})};st.displayName="RotateLeftOutlined";const zt=i.exports.forwardRef(st);var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};const Tt=Et;var lt=function(e,n){return c(De,{...y(y({},e),{},{ref:n,icon:Tt})})};lt.displayName="RotateRightOutlined";const Dt=i.exports.forwardRef(lt);var Zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};const jt=Zt;var ct=function(e,n){return c(De,{...y(y({},e),{},{ref:n,icon:jt})})};ct.displayName="ZoomInOutlined";const Gt=i.exports.forwardRef(ct);var Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};const Vt=Ut;var ut=function(e,n){return c(De,{...y(y({},e),{},{ref:n,icon:Vt})})};ut.displayName="ZoomOutOutlined";const Ht=i.exports.forwardRef(ut);var At=globalThis&&globalThis.__rest||function(o,e){var n={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(o);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(o,t[a])&&(n[t[a]]=o[t[a]]);return n},vt={rotateLeft:c(zt,{}),rotateRight:c(Dt,{}),zoomIn:c(Gt,{}),zoomOut:c(Ht,{}),close:c(pt,{}),left:c(Ct,{}),right:c(ht,{})},Ft=function(e){var n=e.previewPrefixCls,t=e.preview,a=At(e,["previewPrefixCls","preview"]),u=i.exports.useContext(nt),v=u.getPrefixCls,s=v("image-preview",n),m=v(),g=i.exports.useMemo(function(){if(t===!1)return t;var f=Te(t)==="object"?t:{};return $e($e({},f),{transitionName:Ee(m,"zoom",f.transitionName),maskTransitionName:Ee(m,"fade",f.maskTransitionName)})},[t]);return c(Ze.PreviewGroup,{preview:g,previewPrefixCls:s,icons:vt,...a})};const Wt=Ft;var ot=globalThis&&globalThis.__rest||function(o,e){var n={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(o);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(o,t[a])&&(n[t[a]]=o[t[a]]);return n},ft=function(e){var n=e.prefixCls,t=e.preview,a=ot(e,["prefixCls","preview"]),u=i.exports.useContext(nt),v=u.getPrefixCls,s=u.locale,m=s===void 0?qe:s,g=u.getPopupContainer,f=v("image",n),w=v(),P=m.Image||qe.Image,M=i.exports.useMemo(function(){if(t===!1)return t;var k=Te(t)==="object"?t:{},L=k.getContainer,U=ot(k,["getContainer"]);return $e($e({mask:se("div",{className:"".concat(f,"-mask-info"),children:[c(mt,{}),P==null?void 0:P.preview]}),icons:vt},U),{getContainer:L||g,transitionName:Ee(w,"zoom",k.transitionName),maskTransitionName:Ee(w,"fade",k.maskTransitionName)})},[t,P]);return c(Ze,{prefixCls:f,preview:M,...a})};ft.PreviewGroup=Wt;const rr=ft;export{rr as I};
